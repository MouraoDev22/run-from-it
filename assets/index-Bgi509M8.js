import{i as u}from"./kaplay-DN0ZdhPT.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerPolicy&&(e.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?e.credentials="include":o.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(o){if(o.ep)return;o.ep=!0;const e=n(o);fetch(o.href,e)}})();const a=48,f=750,w=300;u();loadRoot("./");loadSound("backgroundMusic","music/backgroundMusic.mp3");loadSprite("backgroundImage","sprites/background-image.jpg");loadSprite("pennywise","sprites/pennywise/pennywise.png");loadSprite("pennywiseRunning","sprites/pennywise/pennywise-running.png",{sliceX:6,sliceY:6,anims:{run:{from:0,to:35,speed:30,loop:!0}}});loadSprite("pennywiseJumping","sprites/pennywise/pennywise-jumping.png",{sliceX:6,sliceY:6,anims:{jump:{from:0,to:35,speed:50,loop:!1}}});loadSprite("childRunning","sprites/child1/child-running.png",{sliceX:6,sliceY:6,anims:{run:{from:0,to:35,speed:70,loop:!0}}});loadSprite("boneco-de-neve","sprites/obstáculos/boneco-de-neve.png");loadSprite("balloon","sprites/coletáveis/balloon.png");loadShader("selectiveRed",null,`
    vec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {
        vec4 c = def_frag();
        float gray = dot(c.rgb, vec3(0.299, 0.587, 0.114));
        gray = (gray - 0.5) * 1.5 + 0.6;
        float redness = c.r - max(c.g, c.b);
        float mask = smoothstep(0.1, 0.25, redness);
        vec3 lowSat = mix(vec3(gray), c.rgb, 0.3);
        return vec4(mix(lowSat * 0.4, c.rgb * 0.4, mask), c.a);
    }
`);scene("game",()=>{usePostEffect("selectiveRed");let s=w,t=0;setGravity(1600);const n=add([sprite("backgroundImage"),pos(0,0),scale(width()/1024,height()/572),fixed(),z(-1),move(LEFT,s/10),"background"]),r=add([sprite("backgroundImage"),pos(width(),0),scale(width()/1024,height()/572),fixed(),z(-1),move(LEFT,s/10),"background"]);onUpdate("background",c=>{c.pos.x<=-width()&&(c.pos.x+=width()*2)});const o=add([rect(width(),a),pos(0,height()),anchor("botleft"),area(),body({isStatic:!0}),color(255,255,255),outline(2),"floor"]);loop(.1,()=>{add([circle(rand(1,3)),pos(rand(0,width()),-10),color(255,255,255),move(DOWN,rand(20,100)),opacity(rand(.5,.8)),offscreen({destroy:!0}),z(100),"snow"])});const e=add([sprite("pennywiseRunning"),pos(width()/5,height()-90),anchor("center"),area({scale:vec2(.5,1)}),body(),scale(.6)]);e.play("run");const i=add([sprite("childRunning"),pos(width()-140,height()-90),anchor("center"),area({scale:vec2(.5,1)}),body(),scale(.35)]);i.play("run"),onResize(()=>{n.scale=vec2(width()/1024,height()/572),r.scale=vec2(width()/1024,height()/572),o.width=width(),o.pos.y=height(),e.pos.x=width()/5,e.pos.y=height()-90,i.pos.x=width()-140,i.pos.y=height()-90});function d(){e.isGrounded()&&(e.use(sprite("pennywiseJumping")),e.play("jump"),e.jump(f))}e.onGround(()=>{e.use(sprite("pennywiseRunning")),e.play("run")}),onKeyPress("space",d),onClick(d);function l(){add([sprite("balloon"),pos(width(),height()-a-270),area({scale:vec2(.4,.5)}),anchor("top"),move(LEFT,s),scale(.15),offscreen({destroy:!0}),"balloon"]),wait(rand(10,20),l)}l();function p(){add([sprite("boneco-de-neve"),area({scale:vec2(.3,.5)}),pos(width(),height()-a-40),anchor("center"),move(LEFT,s),scale(.2),offscreen({destroy:!0}),"boneco-de-neve"]),wait(rand(2,2.5),p)}p(),e.onCollide("balloon",c=>{destroy(c);for(let h=0;h<15;h++)add([rect(rand(3,5),rand(3,5)),pos(c.pos),color(rand(0,255),rand(0,255),rand(0,255)),anchor("center"),move(vec2(rand(-1,1),rand(-1,1)).unit(),rand(100,300)),rotate(rand(0,360)),body(),offscreen({destroy:!0}),"confete"]);t+=50,add([text("+50"),pos(c.pos),color(255,0,0),anchor("center"),move(UP,100),offscreen({destroy:!0}),"balloon-score"])}),e.onCollide("boneco-de-neve",()=>{go("lose",t)});const g=add([text(t),pos(24,24)]);onUpdate(()=>{t+=.05,g.text=t.toFixed(),s+=.01})});scene("lose",s=>{const t=add([sprite("backgroundImage"),pos(0,0),scale(width()/1024,height()/572),fixed(),z(-1),"background"]),n=add([rect(width(),a),pos(0,height()),anchor("botleft"),area(),body({isStatic:!0}),color(255,255,255),outline(2),"floor"]),r=add([sprite("pennywise"),pos(width()/2,height()/2-80),scale(.6),anchor("center")]),o=add([text(s.toFixed()),pos(width()/2,height()/2+80),scale(2),anchor("center")]);onResize(()=>{t.scale=vec2(width()/1024,height()/572),n.width=width(),n.pos.y=height(),r.pos=vec2(width()/2,height()/2-80),o.pos=vec2(width()/2,height()/2+80)}),onKeyPress("space",()=>go("game")),onClick(()=>go("game"))});scene("start",()=>{usePostEffect("selectiveRed");const s=add([sprite("backgroundImage"),pos(0,0),scale(width()/1024,height()/572),fixed(),z(-1)]),t=add([rect(width(),a),pos(0,height()),anchor("botleft"),color(255,255,255),outline(2)]),n=add([sprite("pennywise"),pos(width()/5,height()-90),anchor("center"),scale(.6)]),r=add([sprite("childRunning"),pos(width()-140,height()-90),anchor("center"),scale(.35)]),o=add([text("Click to Play"),pos(width()/2,height()/2),anchor("center"),scale(1.5)]);onResize(()=>{s.scale=vec2(width()/1024,height()/572),t.width=width(),t.pos.y=height(),n.pos.x=width()/5,n.pos.y=height()-90,r.pos.x=width()-140,r.pos.y=height()-90,o.pos=vec2(width()/2,height()/2)});const e=()=>{play("backgroundMusic",{volume:.3,speed:1,loop:!0}),go("game")};onKeyPress("space",e),onClick(e)});go("start");
//# sourceMappingURL=index-Bgi509M8.js.map
